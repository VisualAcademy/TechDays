var HealthMonitor=function(){function n(n){this._myShip=n,this._maxHealth=Ship.START_LIFE,this._currentHealthBar=$("#Health"),this._currentHealthHeart=$("#HealthHeart"),this._whiteHeartIndicator=$("#WhiteHealthHeart"),this._healthHolder=$("#HealthHolder"),this._healthText=$("#HealthText"),this._gameWrapper=$("#gameWrapper"),this._whiteHeartVisible=!0,this._lastHealth=this._myShip.LifeController.Health,this._halfHeartWidth=.5*this._currentHealthHeart.width()}return n.ANIMATE_SPEED=500,n.BadThreshold=.3,n.HurtThreshold=.6,n.prototype.OnScreenResize=function(){this._lastHealth=-1,this.Update(!0)},n.prototype.Update=function(t){var u,f;if(this._myShip.LifeController.Health!==this._lastHealth){this._maxHealth=this._myShip.MaxLife,this._myShip.LifeController.Health<this._lastHealth?(u=this._myShip.LifeController.Health-this._lastHealth,u===0||t||GAME_GLOBALS.AnimationManager.Add(new TextAnimation(u.toString(),new Vector2(this._myShip.MovementController.Position.X+.5*this._myShip.WIDTH,this._myShip.MovementController.Position.Y-1.5*this._myShip.HEIGHT),{duration:2e3,color:[237,30,121],fontSize:"36px SegoeUISemibold"})),this._myShip.LifeController.Health<=0&&(this._whiteHeartIndicator.fadeOut(n.ANIMATE_SPEED),this._whiteHeartVisible=!1)):this._whiteHeartVisible?(f=this._myShip.LifeController.Health-this._lastHealth,f>0&&!t&&GAME_GLOBALS.AnimationManager.Add(new TextAnimation("+"+f,new Vector2(this._myShip.MovementController.Position.X+.5*this._myShip.WIDTH,this._myShip.MovementController.Position.Y-1.5*this._myShip.HEIGHT),{duration:2e3,color:[122,201,67],fontSize:"36px SegoeUISemibold"}))):(this._whiteHeartVisible=!0,this._whiteHeartIndicator.fadeIn(n.ANIMATE_SPEED)),this._lastHealth=this._myShip.LifeController.Health,this._healthText.html(this._lastHealth+"/"+this._maxHealth),this._currentHealthBar.stop(!0),this._currentHealthHeart.stop(!0);var i=this._lastHealth/this._maxHealth,e=this._healthHolder.width(),o=Math.min(Math.max(e*i-this._halfHeartWidth,0),e-2*this._halfHeartWidth),r;this._currentHealthHeart.removeClass("good hurt bad"),i<=n.BadThreshold?(this._currentHealthHeart.addClass("bad"),r=GAME_GLOBALS.Colors.ShipBad):i<=n.HurtThreshold?(this._currentHealthHeart.addClass("hurt"),r=GAME_GLOBALS.Colors.ShipHurt):(this._currentHealthHeart.addClass("good"),r=GAME_GLOBALS.Colors.ShipGood),this._currentHealthHeart.animate({left:o},n.ANIMATE_SPEED,"easeOutExpo"),this._currentHealthBar.animate({width:i*100+"%",backgroundColor:r},n.ANIMATE_SPEED,"easeOutExpo")}},n}()