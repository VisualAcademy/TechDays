var AreaRenderer=function(){function n(n,t){this._showMap=!0,this._areaLetters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this._hudArea=$("#Area"),this.OnMapResize(t),this._myShip=n,this.applyKeyboardMappings()}return n.AREA_BOX_COLOR="#304665",n.AREA_TEXT_COLOR="#3fa9f5",n.AREA_TEXT_MARGIN=13,n.KEYBOARD_MAPPING="m",n.prototype.applyKeyboardMappings=function(){var t=this;shortcut.add(n.KEYBOARD_MAPPING,function(){t._showMap=!t._showMap})},n.prototype.drawSectorMap=function(n,t,i){for(var u=this.getBoxPositions(n,t,i),r=u.length-1;r>=0;r--)this.drawAreaBox(u[r])},n.prototype.drawAreaBox=function(t){CanvasContext.strokeSquare(t.Position,this._areaSize,n.AREA_BOX_COLOR),CanvasContext.drawText(t.Sector,t.Position.X+n.AREA_TEXT_MARGIN,t.Position.Y+n.AREA_TEXT_MARGIN,n.AREA_TEXT_COLOR,!1,"start","top"),CanvasContext.drawText(t.Sector,t.Position.X+n.AREA_TEXT_MARGIN,t.Position.Y+this._areaSize.Width-n.AREA_TEXT_MARGIN,n.AREA_TEXT_COLOR,!1,"start","bottom"),CanvasContext.drawText(t.Sector,t.Position.X+this._areaSize.Width-n.AREA_TEXT_MARGIN,t.Position.Y+n.AREA_TEXT_MARGIN,n.AREA_TEXT_COLOR,!1,"end","top"),CanvasContext.drawText(t.Sector,t.Position.X+this._areaSize.Width-n.AREA_TEXT_MARGIN,t.Position.Y+this._areaSize.Width-n.AREA_TEXT_MARGIN,n.AREA_TEXT_COLOR,!1,"end","bottom")},n.prototype.getBoxPosition=function(n){return new Vector2(Math.ceil(n%3),Math.floor(n/3))},n.prototype.getBoxPositions=function(n,t,i){var e=[],s=Vector2.SubtractVFromN(n,this._areaSize.Width),h=this,o,u,f,r;for(e.push({Position:n,Sector:h._areaLetters[t--]+i--}),o={MovementController:{Position:s},WIDTH:this._areaSize.Width,HEIGHT:this._areaSize.Height},u=0;u<9;u++)u!==4&&(f=this.getBoxPosition(u),r=Vector2.MultiplyN(f,this._areaSize.Width),r=Vector2.AddV(r,s),r.X>=0&&r.Y>=0&&r.X+this._areaSize.Width<=this._mapSize&&r.Y+this._areaSize.Width<=this._mapSize&&(o.MovementController.Position=r,CanvasContext.Camera.InView(o)&&e.push({Position:r,Sector:h._areaLetters[t+f.X]+(i+f.Y)})));return e},n.prototype.OnMapResize=function(n){this._mapSize=n;var t=Math.max(Math.round(this._mapSize/this._areaLetters.length),1e3);this._areaSize=new Size(t)},n.prototype.Draw=function(){var n=Math.max(Math.floor(this._myShip.MovementController.Position.X/this._areaSize.Width),0),i=this._areaLetters[n],t=Math.max(Math.ceil(this._myShip.MovementController.Position.Y/this._areaSize.Height),1),r=new Vector2(n*this._areaSize.Width,(t-1)*this._areaSize.Width);this._showMap&&this.drawSectorMap(r,n,t),this._hudArea.html(i+t)},n.prototype.Update=function(){this.Draw()},n}()