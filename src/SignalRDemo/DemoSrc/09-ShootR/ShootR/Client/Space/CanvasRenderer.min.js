var CanvasRenderer=function(){function n(n){this._textFont="15px SegoeUISemibold",this._textColor="rgba(255, 255, 255, 1)",this.Camera=new Camera,this._drawContext=n[0].getContext("2d"),this._canvasBuffer=document.createElement("canvas"),this._canvasBufferContext=this._canvasBuffer.getContext("2d")}return n.TO_RADIANS=Math.PI/180,n.prototype.UpdateSize=function(n){this.CanvasSize=n,this.CanvasCenter=new Vector2(.5*this.CanvasSize.Width,.5*this.CanvasSize.Height),this._canvasBuffer.width=this.CanvasSize.Width,this._canvasBuffer.height=this.CanvasSize.Height},n.prototype.drawMapBoundary=function(n){var t={X:-this.Camera.Position.X+this.CanvasCenter.X,Y:-this.Camera.Position.Y+this.CanvasCenter.Y};this._canvasBufferContext.save(),this._canvasBufferContext.translate(t.X,t.Y),this._canvasBufferContext.lineWidth=5,this._canvasBufferContext.strokeStyle="#3fa9f5",this._canvasBufferContext.strokeRect(0,0,n.Width,n.Height),this._canvasBufferContext.restore()},n.prototype.strokeSquare=function(n,t,i){var r=new Vector2(n.X-this.Camera.Position.X+this.CanvasCenter.X,n.Y-this.Camera.Position.Y+this.CanvasCenter.Y);this._canvasBufferContext.save(),this._canvasBufferContext.translate(r.X,r.Y),this._canvasBufferContext.lineWidth=1,i||(i="#f00"),this._canvasBufferContext.strokeStyle=i,this._canvasBufferContext.strokeRect(0,0,t.Width,t.Height),this._canvasBufferContext.restore()},n.prototype.drawRectangle=function(n,t,i,r,u){var f=new Vector2(n-this.Camera.Position.X+this.CanvasCenter.X,t-this.Camera.Position.Y+this.CanvasCenter.Y);this._canvasBufferContext.save(),this._canvasBufferContext.translate(f.X,f.Y),this._canvasBufferContext.fillStyle=u,this._canvasBufferContext.fillRect(0,0,i,r),this._canvasBufferContext.restore()},n.prototype.drawCircle=function(n,t,i,r,u){this._canvasBufferContext.beginPath(),this._canvasBufferContext.strokeStyle=u,this._canvasBufferContext.lineWidth=r,this._canvasBufferContext.arc(n,t,i,0,Math.PI*2,!0),this._canvasBufferContext.stroke()},n.prototype.drawLine=function(n,t,i,r,u,f){this._canvasBufferContext.save(),this._canvasBufferContext.beginPath(),this._canvasBufferContext.strokeStyle=f,this._canvasBufferContext.lineWidth=u,this._canvasBufferContext.moveTo(n,t),this._canvasBufferContext.lineTo(i,r),this._canvasBufferContext.stroke(),this._canvasBufferContext.restore()},n.prototype.drawText=function(n,t,i,r,u,f,e){var o=new Vector2(-this.Camera.Position.X+this.CanvasCenter.X,-this.Camera.Position.Y+this.CanvasCenter.Y);r||(r=this._textColor),u||(u=this._textFont),this._canvasBufferContext.save(),this._canvasBufferContext.translate(o.X+t,i+o.Y),f||(f="center"),this._canvasBufferContext.textAlign=f,e&&(this._canvasBufferContext.textBaseline=e),this._canvasBufferContext.font=u,this._canvasBufferContext.fillStyle=r,this._canvasBufferContext.fillText(n,0,0),this._canvasBufferContext.restore()},n.prototype.drawRotatedImage=function(t,i,r,u,f,e,o,s,h,c){this._canvasBufferContext.save();var l,a=new Vector2(-this.Camera.Position.X+this.CanvasCenter.X,-this.Camera.Position.Y+this.CanvasCenter.Y);f?(l={width:h*.5,height:c*.5},this._canvasBufferContext.translate(o+l.width+a.X,s+l.height+a.Y),this._canvasBufferContext.rotate(i*n.TO_RADIANS),this._canvasBufferContext.drawImage(t,r,u,f,e,-l.width,-l.height,h,c)):(l={width:t.width*.5,height:t.height*.5},this._canvasBufferContext.translate(r+l.width+a.X,u+l.height-this.Camera.Position.Y+this.CanvasCenter.Y),this._canvasBufferContext.rotate(i*n.TO_RADIANS),this._canvasBufferContext.drawImage(t,-l.width,-l.height)),this._canvasBufferContext.restore()},n.prototype.clear=function(){this._canvasBufferContext.clearRect(0,0,this.CanvasSize.Width,this.CanvasSize.Height)},n.prototype.Render=function(){this._drawContext.clearRect(0,0,this.CanvasSize.Width,this.CanvasSize.Height),this._drawContext.drawImage(this._canvasBuffer,0,0)},n}(),CanvasContext=new CanvasRenderer($("#game"))